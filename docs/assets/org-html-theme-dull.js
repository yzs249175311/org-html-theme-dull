var V=Object.defineProperty;var R=(t,e,n)=>e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var S=(t,e,n)=>(R(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerpolicy&&(c.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?c.credentials="include":l.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();class _{constructor(e){S(this,"features",[]);S(this,"_obj");this._obj=e}featurep(e){return this.features.includes(e)}checkAfter(e){return e.every(this.featurep,this)}start(){let e;do{e=!1;for(let[n,o]of Object.entries(this._obj))if(o.length!=0){for(let l of o)if(!(this.featurep(l.name)||l.after&&!this.checkAfter(l.after))){this.features.push(l.name);try{l.init(),e=!0}catch(c){console.log(l.name+"=>>>加载错误"),console.log(c)}}}}while(e)}}function H(){let t=document.querySelector("#content"),e=document.querySelector("#content>h1.title"),n=document.querySelector("#postamble"),o=document.querySelector("#table-of-contents"),l=document.createElement("nav"),c=document.createElement("main");l.classList.add("nav"),document.querySelectorAll(".outline-2").forEach(w=>{var A;let T=document.createElement("span"),I=(A=w.querySelector("h2").lastChild)==null?void 0:A.nodeValue;T.innerText=I,T.classList.add("nav-node"),l.appendChild(T),c.appendChild(w)});let a=document.createElement("header");a.appendChild(e),a.appendChild(l),document.body.insertBefore(a,t),t==null||t.appendChild(c),o==null||o.appendChild(n)}const F={name:"splitOutline",type:"layout",init:H};function G(){document.querySelectorAll("pre[class^=src]").forEach(e=>{let n=document.createElement("div");n.classList.add("top-block"),n.appendChild(document.createElement("span")),n.appendChild(document.createElement("span")),n.appendChild(document.createElement("span")),e.insertAdjacentElement("afterbegin",n),e.dataset.lang=e.className.match(/src-(\w+)/)[1]})}const W={name:"preTopBlock",type:"layout",init:G};let h,k,q,L;function x(t){var e,n,o;Z(),h=t,(e=k[t])==null||e.classList.add("active"),(n=q[t])==null||n.classList.add("active"),(o=L[t])==null||o.classList.add("active")}function Z(){var t,e,n;(t=k[h])==null||t.classList.remove("active"),(e=q[h])==null||e.classList.remove("active"),(n=L[h])==null||n.classList.remove("active")}function P(){h=0,k=document.querySelectorAll("main>.outline-2"),q=document.querySelectorAll("#text-table-of-contents>ul>li"),L=document.querySelectorAll("nav>.nav-node"),x(h),L.forEach((t,e)=>{t.addEventListener("click",()=>{x(e)})})}const D={name:"control",type:"event",init:P};function K(){document.querySelectorAll("pre").forEach(e=>{let n=document.createElement("span");n.classList.add("copy-block"),e.appendChild(n),n.addEventListener("click",o=>{navigator.clipboard.writeText(o.currentTarget.parentNode.innerText).then(()=>{n.classList.add("copyed"),setTimeout(()=>{n.classList.remove("copyed")},3e3)}).catch(l=>{console.log(l)})})})}const z={name:"copyToClip",init:K,type:"event"};function J(){let t=document.querySelector("header .title"),e=document.querySelector("main"),n=!1;e.addEventListener("scroll",o=>{let l=o.currentTarget.scrollTop;l>=200&&!n?(setTimeout(()=>{t.classList.add("hidden")},400),n=!0):l<200&&n&&(setTimeout(()=>{t.classList.remove("hidden")},400),n=!1)})}const Q={name:"hideTitle",type:"event",init:J};let f=null,E=null,b=null,v=null;function U(t){if(b){let e=b.querySelector(`a[href="#${t}"]`);v&&v.classList.remove("current"),v=e,v.classList.add("current")}}function X(t){t.forEach(e=>{let n=e.boundingClientRect,o=e.rootBounds,l=e.target.getAttribute("id");n.top<=o.top&&U(l)})}function Y(t){t.forEach(e=>{e.attributeName=="class"&&(le(),te())})}let N=null,y=null,s=null;function ee(){b=document.querySelector("#text-table-of-contents"),f=document.querySelector("main"),E=f.querySelector(".outline-2[class~=active]").querySelectorAll("h2,h3,h4,h5,h6"),N={root:f,rootMargin:"-20px 0px 0px 0px",threshold:[0,1]},y=new IntersectionObserver(X,N),E.forEach(e=>{y.observe(e)})}function te(){b=document.querySelector("#text-table-of-contents"),f=document.querySelector("main"),E=f.querySelector(".outline-2[class~=active]").querySelectorAll("h2,h3,h4,h5,h6"),y&&y.disconnect(),E.forEach(e=>{y.observe(e)})}function ne(){s&&s.disconnect(),s=new MutationObserver(Y),document.querySelectorAll("main .outline-2[class~=active]").forEach(t=>{s==null||s.observe(t,{attributes:!0})})}function le(){s&&s.disconnect(),document.querySelectorAll("main .outline-2[class~=active]").forEach(t=>{s==null||s.observe(t,{attributes:!0})})}function oe(){ee(),ne()}const ce={name:"scrollWithToc",type:"event",init:oe};function ie(){let t=document.querySelector("nav"),e=document.createElement("span"),n=document.documentElement,o=0,l=["light","dark"];e.classList.add("switchTheme"),e.innerHTML=`
<svg class="sun-and-moon" aria-hidden="true" width="24" height="24" viewBox="0 0 24 24">
<mask class="moon" id="moon-mask">
<rect x="0" y="0" width="100%" height="100%" fill="white" />
<circle cx="24" cy="10" r="6" fill="black" />
</mask>
<circle class="sun" cx="12" cy="12" r="6" mask="url(#moon-mask)" fill="currentColor" />
<g class="sun-beams" stroke="currentColor">
<line x1="12" y1="1" x2="12" y2="3" />
<line x1="12" y1="21" x2="12" y2="23" />
<line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
<line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
<line x1="1" y1="12" x2="3" y2="12" />
<line x1="21" y1="12" x2="23" y2="12" />
<line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
<line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
</g>
</svg>`,e.addEventListener("click",()=>{o=++o%l.length,e.setAttribute("theme",l[o]),n.setAttribute("theme",l[o])}),t.appendChild(e),window.matchMedia("(prefers-color-scheme: dark)").matches&&(o=1),e.setAttribute("theme",l[o]),n.setAttribute("theme",l[o])}const re={name:"switchTheme",type:"widget",init:ie};let d=null,M=null,r=null,p=null,i=null,m=null,u=null,C=null,g;function ae(){r==null||r.classList.add("open"),d==null||d.classList.add("hidden")}function B(){r==null||r.classList.remove("open"),d==null||d.classList.remove("hidden")}function se(){C=document.querySelectorAll("main>[id^=outline-container-org]"),M=document.createElement("div"),M.className="searchContainer",r=document.createElement("div"),r.className="searchResult",p=document.createElement("div"),p.className="searchCom",i=document.createElement("input"),i.className="searchInput",i.type="text",i.placeholder="请输入内容",m=document.createElement("button"),m.className="searchButton",m.innerHTML=`
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M3.624,15a8.03,8.03,0,0,0,10.619.659l5.318,5.318a1,1,0,0,0,1.414-1.414l-5.318-5.318A8.04,8.04,0,0,0,3.624,3.624,8.042,8.042,0,0,0,3.624,15Zm1.414-9.96a6.043,6.043,0,1,1-1.77,4.274A6,6,0,0,1,5.038,5.038ZM4.622,9.311a1,1,0,0,1,2,0A2.692,2.692,0,0,0,9.311,12a1,1,0,0,1,0,2A4.7,4.7,0,0,1,4.622,9.311Z"></path></g></svg>
`,p.appendChild(i),p.appendChild(m);let t=document.querySelector(".nav");t==null||t.appendChild(p),d=document.querySelector("#text-table-of-contents"),d==null||d.insertAdjacentElement("afterend",r)}function O(t,e){let n=[];return!e||!t?[]:(e.childNodes.forEach(o=>{var l;o.nodeType===3&&(l=o.nodeValue)!=null&&l.match(t)&&n.push({node:e,content:o.nodeValue}),o.nodeType===1&&(n=[...n,...O(t,o)])}),n)}function de(t,e){let n=[];return e==null||e.forEach(o=>{n.push(O(t,o))}),n}function ue(t){u==null||u.classList.remove("searched-item"),u=t.node,u.scrollIntoView(),u.classList.add("searched-item")}function me(t,e,n){if(!e)return;let o=document.createElement("ul");t.map(l=>{let c=document.createElement("li"),a=document.createElement("span");a.innerHTML=l.content,c.appendChild(a),a.addEventListener("click",()=>{g==null||g.classList.remove("current"),g=a,a.classList.add("current"),n(l)}),o.appendChild(c)}),e==null||e.appendChild(o)}function $(){if(j(),(i==null?void 0:i.value)==""){B();return}de(i==null?void 0:i.value,C).forEach((e,n)=>{var l;if(e.length==0)return;let o=document.createElement("h4");o.innerText=(l=C[n].querySelector("h2"))==null?void 0:l.innerText,r==null||r.appendChild(o),me(e,r,c=>{x(n),setTimeout(()=>{ue(c)})})}),ae()}function he(){m==null||m.addEventListener("click",()=>{$()}),i==null||i.addEventListener("input",t=>{t.currentTarget.value==""&&j()}),i==null||i.addEventListener("keydown",t=>{t.key==="Enter"&&$()})}function j(){r.innerHTML='<div class="serchResult"></div>',u==null||u.classList.remove("searched-item"),B()}function pe(){se(),he()}const fe={name:"globalSearch",type:"widget",init:pe};let ye=new _({layouts:[F,W],widgets:[re,fe],events:[D,z,Q,ce]});ye.start();
